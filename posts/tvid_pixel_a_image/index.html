<!DOCTYPE html><html lang="fr-FR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://cours-v2.ew.r.appspot.com/query?id=agplfmNvdXJzLXYychULEghBcGlRdWVyeRiAgIDo14eBCgw"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="TVID: Du pixel a l’ecran" /><meta property="og:locale" content="fr_FR" /><meta name="description" content="Lien de la note Hackmd" /><meta property="og:description" content="Lien de la note Hackmd" /><link rel="canonical" href="https://lemasyma.github.io/cours/posts/tvid_pixel_a_image/" /><meta property="og:url" content="https://lemasyma.github.io/cours/posts/tvid_pixel_a_image/" /><meta property="og:site_name" content="Cours" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-11-08T10:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="TVID: Du pixel a l’ecran" /><meta name="google-site-verification" content="mErcVOJcxNzULHvQ99qSclI_DTX0zANqgpsd3jGhkfs" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-11-10T14:31:05+01:00","datePublished":"2021-11-08T10:00:00+01:00","description":"Lien de la note Hackmd","headline":"TVID: Du pixel a l’ecran","mainEntityOfPage":{"@type":"WebPage","@id":"https://lemasyma.github.io/cours/posts/tvid_pixel_a_image/"},"url":"https://lemasyma.github.io/cours/posts/tvid_pixel_a_image/"}</script><title>TVID: Du pixel a l'ecran | Cours</title><link rel="apple-touch-icon" sizes="180x180" href="/cours/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/cours/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/cours/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/cours/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/cours/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Cours"><meta name="application-name" content="Cours"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/cours/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cours-v2.ew.r.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://cours-v2.ew.r.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/cours/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/cours/" alt="avatar" class="mx-auto"> <img src="/cours/assets/img/favicons/logo.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/cours/">Cours</a></div><div class="site-subtitle font-italic">Certains cours sont en francais, certains sont en anglais, d'autres sont un mix des deux</div></div><ul class="w-100"><li class="nav-item"> <a href="/cours/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/cours/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/cours/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/cours/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/cours/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/lemasyma" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="" aria-label="" target="_blank" rel="noopener"> <i class=""></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/cours/"> Home </a> </span> <span>TVID: Du pixel a l'ecran</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>TVID: Du pixel a l'ecran</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/lemasyma">lemasyma</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2021-11-08 10:00:00 +0100" data-toggle="tooltip" data-placement="bottom" title="Mon, Nov 8, 2021, 10:00 AM +0100" >Nov 8, 2021</em> </span> <span> Updated <em class="timeago" date="2021-11-10 14:31:05 +0100 " data-toggle="tooltip" data-placement="bottom" title="Wed, Nov 10, 2021, 2:31 PM +0100" >Nov 10, 2021</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1982 words"> <em>11 min</em> read</span> <span> <em id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </em> views </span></div></div></div><div class="post-content"><p>Lien de la <a href="https://hackmd.io/@lemasymasa/S1ZO1_LDt">note Hackmd</a></p><p>On va decouvrir les principes fondamentaux l’audio et la video numerique.</p><ul><li>20h dont 6 de TP<li>TPs de 3h<li>On va faire notre propre decodeur et afficheur video</ul><p>Plusieurs parties:</p><ul><li>Fondamentaux de ce qu’est un pixel<ul><li>Qu’est-ce que signifie les resolutions (pourquoi pas des multiples de 10 ? Pourquoi 1080i ? Pourquoi 16/9e ?)</ul><li>Structure d’une image video<li>Cadences<ul><li>Comment on fait pour afficher n’importe quel film a n’importe quelle taille vers n’importe quelle television ?<li>Comment on fait de l’adaptation de cadence ?</ul><li>Entrelacement<ul><li>Ca nous pourri la tete depuis 70 ans</ul><li>Affichage<ul><li>Comment trouver un mode commun d’affichage ?</ul></ul><div class="alert alert-warning" role="alert"><p>Ce sont les prerequis pour la suite</p></div><p>La suite: standards de compression video</p><h1 id="pixel">Pixel</h1><div class="alert alert-info" role="alert"><p>C’est un <strong>element d’une image</strong></p></div><p><img data-proofer-ignore data-src="https://i.imgur.com/E8mjnPa.gif" alt="" /></p><p>Mais encore ?</p><ul><li>C’est un format<li>Profondeur<ul><li>Combien de bits par composants ?</ul><li>espace de couleur</ul><h2 id="pixel-aspect-ratio">Pixel aspect ratio<a href="#pixel-aspect-ratio"><i class="fas fa-hashtag"></i></a></h2></h2><p>Monde PC: PAR = 1:1</p><ul><li>Pixels carres</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/BCoe2bD.png" alt="" /></p><p>Monde video: PAR &gt;= 1</p><ul><li>Pixel rectangulaires</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/yAsLYU9.png" alt="" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/XiAcE8S.png" alt="" /></p><p><em>Pourquoi ?</em></p><blockquote><p>On tient ca de l’analogique: pas de resolution</p></blockquote><ul><li>Analogique: pas de resolution<li>Numerique: resolutions partout<li>Besoin de correspondance numerique $\leftrightarrow$ analogique</ul><div class="alert alert-success" role="alert"><p>On arrive sur le <strong>display aspect ration</strong>: la resolution de sortie</p>\[\color{red}{\text{PAR}\times\text{DIM} = \text{DAR}}\]</div><p><em>Est-ce qu’on a deja essaye de jouer un fichier VOG d’un DVD tout seul ?</em></p><blockquote><p>L’image sera plus carree et deformee car on ne lit pas les metadata</p></blockquote><h2 id="color-space">Color Space<a href="#color-space"><i class="fas fa-hashtag"></i></a></h2></h2><p>Generateurs de graphismes RGB</p><ul><li>Ordis, smartphones, tablettes On Screen Display (OSDs)<ul><li>On Screen Technique: superposition d’affichage comme l’affichage du numero de la chaine quand on zappe</ul></ul><p><em>Pourquoi on affiche le nom de la chaine quand on zappe en numerique ?</em></p><blockquote><p>En analogique, quand on zappait c’etait instantane car il suffisait de changer que quelques parametres pour changer de frequence sans pre-processing C’est juste pour <strong>faire attendre les gens</strong>, sinon on n’a qu’un ecran noir</p></blockquote><p><em>Pourquoi certaines box ont une mosaique avec plusieurs flux videos de differentes chaines ?</em></p><blockquote><p>Car ce n’est pas fait par la box, ce sont des chaines mosaiques pre-composees par l’emetteur On utilise les metadatas pour choisir une chaine sur les mosaiques Certaines mosaiques ne permettent pas de selectionner de chaine</p></blockquote><ul><li>ARGB, ABGR<ul><li>A est le canal $\alpha$ (alpha)<li>ABGR est la representation d’Android</ul><li>BGRA, RGBA, …</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/vSy6lav.gif" alt="" /></p><p>Video: YUV</p><ul><li>Images et sequences animees<li>Y: luminance<li>U, V: Chrominance (aka Cb, Cr)<li>Raisons historiques</ul><p><em>Est-ce que les premiers signaux analogiques pour la tele etaient en couleur ?</em></p><blockquote><p>Bien sur que non</p></blockquote><p>Vers les annees 50 on se dit que ca serait bien d’avoir la couleurs</p><blockquote><p>On va faire un truc degueulasse pour que ce soit retrocompatible avec les gens ayant une tele en noir et blanc</p></blockquote><div class="alert alert-danger" role="alert"><p>L’analogique est <strong>la reponse de ce qu’on fait en numerique</strong>.</p></div><p>Les US avaient NTC qui on cree un standard video de 480 lignes en noir et blanc qui est passe en couleurs en une nuit (et ca a marche !)</p><div class="alert alert-warning" role="alert"><p>L’heritage de l’analogiqe nous enquiquine encore aujourd’hui</p></div><h2 id="exemple-rgb">Exemple RGB<a href="#exemple-rgb"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-proofer-ignore data-src="https://i.imgur.com/RiljJnd.png" alt="" /></p><p><em>Qu’est-ce qu’on remarque ?</em></p><blockquote><p>Le vert est predominant car il est predominant dans la nature Les humains ont un excellent pouvoir d’observation sur le vert (60-70% de notre champ de vision) On voit moins bien le rouge car c’est le sang et le feu (20-30% de notre champ de vision) On voit encore moins bien le bleu car on ne veut pas etre aveugle par le ciel</p></blockquote><div class="alert alert-success" role="alert"><p>La compression numerique va user et abuser de nos limitations de perception</p></div><h2 id="exempe-yuv">Exempe YUV<a href="#exempe-yuv"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-proofer-ignore data-src="https://i.imgur.com/lPrpPld.png" alt="" /></p><p><em>Qu’est-ce qu’on remarque ?</em></p><blockquote><p>Dans le V il y a tres peu de rouge, noye dans du gris</p></blockquote><p><em>Si on etait un algorithme, lesquels de ces images on trouverait plus facile a digerer que les autres ?</em></p><blockquote><p>U et V ont une dynamique faible donc l’encodeur entropique va se regaler</p></blockquote><p><img data-proofer-ignore data-src="https://i.imgur.com/MP5SlRe.png" alt="" /></p><div class="alert alert-danger" role="alert"><p>On va grignoter tout ce qui est possible pour faire des economies</p></div><h2 id="formats">Formats<a href="#formats"><i class="fas fa-hashtag"></i></a></h2></h2><p>Format lineaire:</p><ul><li>Toute l’info est dans le pixel<li>Profondeur: 8..16 bits/composantes<ul><li>HDR: 10 bits</ul><li>8 bpc: “True Color”<ul><li>Representation des pixels : ARGB, ARGB, ARGB…</ul><li>Exemple: #FF00FF00<ul><li>C’est du vert<li>alpha opaque et vert a fond</ul><li>Exotiques: high colors</ul><h2 id="considerations-systeme-true-colors">Considerations systeme: True colors<a href="#considerations-systeme-true-colors"><i class="fas fa-hashtag"></i></a></h2></h2><p><em>Combien ca coute ?</em></p><p><em>Que faut-il dans un systeme ?</em></p><ul><li>Horloge Systeme<li>CPU<li>RAM<ul><li>Efficacite<li>Bande passante (BW)</ul><li>BUS DMA<ul><li>Direct Memory Access<li>Faire des transferts de donnees enorme sans utiliser un iota du processeur<li>Taille: combien de bytes au max il est capable de copier<li>BW: bande passante (nb bits/s capable de transferer)</ul><li>Modules hardware<ul><li>Carte video (GPU), carte son, etc<li>Autres modules d’affichage</ul></ul><h3 id="ccc-full-hd-true-color-">CCC Full Hd True Color ?<a href="#ccc-full-hd-true-color-"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>Image fixe RGB $8bcp$ @ $1080p60$<li>BW afficage: $1920 \times 1080 \times 60 \times 24 = 2,98 Gb/s$</ul><p>Pour un systeme:</p><ul><li>Bus clock: $200$ MHz<li>DRAM: DDR3 $12800$ ($8$ bytes / burst, classiquement)<ul><li>$8$ bursts / clock<li>$\Rightarrow 64$ bytes / clock<li>$80\%$ d’efficacite<li>$\Rightarrow$ BW RAM $= 200M \times 32 = 6,4 Gb/s$<li>~$3,88\%$ BW ram<li>~$46\%$ BW bus<li>Juste pour afficher !<li>$\times 2$: NOK. Pas d’animation possible</ul><li>DMA: $64$ bits / clock (DMA++)<ul><li>$\Rightarrow$ BW bus $=200M\times 64 = 12,8 Gb/s$<li>$\Rightarrow$~$3,88\%$ BW RAM<li>$\Rightarrow$~$23\%$ BW bus<li>$\Rightarrow$ Image animee jouable<li>$\Rightarrow$ Couteux</ul></ul><h3 id="ccc-4k-">CCC 4K ?<a href="#ccc-4k-"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>Image fixe RGB</ul><p>TODO</p><h2 id="pixels-formats">Pixels: formats<a href="#pixels-formats"><i class="fas fa-hashtag"></i></a></h2></h2><p>Format paletisse:</p><ul><li>Palette de couleur predeifinie<li>Pixel = index couleur palette<li>Profondeurs: 1, 2, 4, 8 bits / pixel</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/HdD0t8C.png" alt="" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/UJzzSOv.png" alt="" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/S0GOZZN.png" alt="" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/SmfQD5v.png" alt="" /></p><div class="alert alert-success" role="alert"><p><strong>Tous</strong> les OSDs sont paletises</p></div><h2 id="ccc-full-hd-palettise-">CCC Full HD palettise ?<a href="#ccc-full-hd-palettise-"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>Image paletisee 256 couleurs</ul><p>TODO</p><h1 id="structure-dune-image-video">Structure d’une image video</h1><h2 id="colorspace-yuv">Colorspace YUV<a href="#colorspace-yuv"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-proofer-ignore data-src="https://i.imgur.com/pqf4xcC.png" alt="" /></p><h2 id="sampling-mode">Sampling Mode<a href="#sampling-mode"><i class="fas fa-hashtag"></i></a></h2></h2><div class="alert alert-info" role="alert"><p><strong>Sampling Mode</strong>: sous-echantillonnage de la chrominance</p></div><p><em>Qu’est-ce que ca veut dire ?</em></p><blockquote><p>On va peut-etre enlever du U ou du V sur certains pixels car nos yeux ne peuvent pas le voir de toute facon Le fameux grignottage</p></blockquote><ul><li>Seulement en color space YUV<li>Oeil moins sensible a UV</ul><p>Exemple:</p><p><img data-proofer-ignore data-src="https://i.imgur.com/U9VdBXw.png" alt="" /></p><p>Sur la 2e image, on a commence a diviser l’echantillonnage</p><p><em>Qu’est-ce qu’on observe ?</em></p><blockquote><p>Il y a des bandes qui apparaissent a chaque bordures de couleurs <em>Elles se degeulent les unes sur les autres</em> Si on met une video youtube avec du rouge petant on aura le meme effet</p></blockquote><div class="alert alert-warning" role="alert"><p>Ca arrive surtout sur les cas extremes avec des transitions abruptes</p></div><p>On suppose 8 pixels:</p><p><img data-proofer-ignore data-src="https://i.imgur.com/yf2csMo.png" alt="" /></p><p>Ils ont chacun leurs composantes</p><div class="alert alert-info" role="alert"><p><strong>$4:4:4$</strong></p><p>Pour 4 pixels consecutifs (pas forcement en ligne mais aussi en carre) il y a 4 $U$ et 4 $V$</p></div><div class="alert alert-info" role="alert"><p>$4:2:2$</p><p>Pour 4 pixels consecutifs, on n’en a que 2 qui contiennent de la chrominance</p><p><img data-proofer-ignore data-src="https://i.imgur.com/aODeAc3.png" alt="" /></p></div><div class="alert alert-success" role="alert"><p>On a litteralement decime une colonne de chroma sur 2</p></div><blockquote><p>Ce sont toutes les images JPEG</p></blockquote><div class="alert alert-info" role="alert"><p><strong>$4:2:0$ MPEG-1</strong></p><p>On a 6 composantes sur 8 bits au lieu de 12</p><p>Le calculateur fait la moyenne</p><p><img data-proofer-ignore data-src="https://i.imgur.com/72GU0oT.png" alt="" /></p></div><div class="alert alert-success" role="alert"><p>On a beaucoup economise juste en coupant la chroma une ligne sur 2 et un colonne sur 2</p></div><div class="alert alert-info" role="alert"><p><strong>$4:2:0$ MPEG-2</strong></p><p><img data-proofer-ignore data-src="https://i.imgur.com/zvN5vjG.png" alt="" /></p></div><div class="alert alert-info" role="alert"><p>$4:1:1$</p><p><img data-proofer-ignore data-src="https://i.imgur.com/tguXBPK.png" alt="" /></p></div><blockquote><p>Utilise par les Etats-Unis</p></blockquote><p>Pendant notre enfance on avait les camescopes DV, en Europe ils sont en $4:2:2$ et aux US du $4:1:1$</p><div class="alert alert-warning" role="alert"><p>Tous les CODECs aujourd’hui sont bases sur la perception visuelle</p></div><h2 id="image-planaire">Image planaire<a href="#image-planaire"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>Heritage TV: Y avant UV<li>PC: Images interleavees (ARGB, ARGB, …)<li>Video: Images planaires:<ul><li>Buffers composantes separes<li>Luma: Y, Y, Y<li>Chroma: UV, UV, UV<li>Decouplage hardware / composantes</ul></ul><p><em>Une image planaire, combien ca coute ?</em></p><h3 id="ccc-full-hd-planar-422-">CCC Full HD Planar $4:2:2$ ?<a href="#ccc-full-hd-planar-422-"><i class="fas fa-hashtag"></i></a></h3></h3><p>$1080p60$ YUV $4:2:2$ $8$ bits</p><ul><li>Luma: $1920\times 1080\times 60\times 8=\sim1 Gb/s$<li>Chroma: $1920\times 1080\times 60\times 16 / 2=\sim1 Gb/s$</ul><p>Pour un systeme:</p><ul><li>Bus clock: $200$ MHz<li>DRAM: DDR3 $12800$ ($8$ bytes / burst, classiquement)<ul><li>$8$ bursts / clock<li>$\Rightarrow 64$ bytes / clock<li>$80\%$ d’efficacite<li>$\Rightarrow$ BW RAM $=200M\times 64\times 8\times 0.8 = 81,92 Gb/s$</ul><li>Deux DMA 2 fois plus petits: $16$ bits / clock<ul><li>$BW = 200 M \times 16 = 3,2 Gb/s/canal$<li>$2,5\%$ BW ram<li>$31\%$ BW par canal</ul></ul><div class="alert alert-danger" role="alert"><p>On pas en YUV car <strong>c’est le seul format qui nous permet de decimer le chroma</strong> sans tout casser</p></div><h3 id="ccc-full-hd-planar-420-">CCC Full HD Planar $4:2:0$ ?<a href="#ccc-full-hd-planar-420-"><i class="fas fa-hashtag"></i></a></h3></h3><p>$1080p60$ YUV $4:2:0$ $8$ bits $\gt90\%$ des fichiers video (TNT, SAT, YT, Netflix, …)</p><ul><li>Luma: $1920\times 1080\times 60\times 8=\sim1 Gb/s$<li>Chroma $1920\times1080\times60\times16\times\color{green}{4 = \sim 0,5Gb/s}$</ul><p>Pour un systeme:</p><ul><li>Bus clock: $200$ MHz<li>DRAM: DDR3 $12800$ ($8$ bytes / burst, classiquement)<ul><li>$8$ bursts / clock<li>$\Rightarrow 64$ bytes / clock<li>$80\%$ d’efficacite<li>$\Rightarrow$ BW RAM $=200M\times 64\times 8\times 0.8 = 81,92 Gb/s$</ul><li>Deux DMA 2 fois plus petits: $16$ bits / clock<ul><li>$BW = 200 M \times 16 = 3,2 Gb/s/canal$<li>$2,5\%$ BW ram<li>$\sim 31\%$ BW Y, $15\%$ BW UV</ul></ul><h3 id="ccc-4k-planar-420-10-bits-">CCC 4K Planar $4:2:0$ 10 bits ?<a href="#ccc-4k-planar-420-10-bits-"><i class="fas fa-hashtag"></i></a></h3></h3><p>$2160p60$ YUV $4:2:0$ 10 bits: Netflix</p><ul><li>Deux DMA 64 bits / clock<li>Hardware a 2 px / clock<ul><li>BW = 200M x 64 = 12,8 Gb/s/canal</ul><li>9% BW ram<li>TODO</ul><h1 id="entrelacement--desentrelacement">Entrelacement / Desentrelacement</h1><p>70 ans et toutes ses dents</p><p>Un peu d’histoire: les signaux videos ne sont pas tous faits de la meme maniere et ne sont pas fait comme on le pense.</p><p>Mais nous n’avons pas parle de la structure d’une image.</p><p>Il y a un peu moins d’un siecle, des ingenieurs se sont dit “On va transmettre de l’image analogique sur des tubes cathodiques”.</p><p>Le principe d’un ecran cathodique est toujours le meme: on a une surface remplit de photophores qui emet de la lumiere quand elle se prend des electrons, elle met du temps a s’allumer et du temps a s’eteindre.</p><p>On s’est dit qu’on allait utiliser ces ecrans pour afficher des images.</p><p><em>Pourquoi ecran cathodique ?</em></p><p>Car les electrons sont generes par une cathode, et si on etait un peu trop pres de l’ecran on se prenait des rayons.</p><p>On ecrit notre image ligne a ligne a l’ecran et on obtient notre image.</p><p><strong>SAUF QUE</strong></p><p>On a remarque de 480 lignes c’est bien pour le format d’image. Mais si on envoie 480 lignes par image, 60 images par seconde, on a un signal beaucoup trop large.</p><p>Des ingenieurs se sont dit “Mais c’est pas un probleme, regardez le temps que prend mon ecran a s’eteindre” (c’est une gaussienne). Ces ingenieurs se sont dit “Je ne vais envoyer qu’une ligne sur 2 de chaque image et alterner entre lignes paires/impaires”.</p><div class="alert alert-danger" role="alert"><p>C’est ca <strong>l’entrelacement</strong></p></div><div class="alert alert-warning" role="alert"><p>On a decime l’image spatialement.</p></div><div class="alert alert-success" role="alert"><p>On a quasiment la meme qualite d’image</p></div><p><em>Est-ce qu’on a vu que les tubes cathodiques scintillent ?</em></p><blockquote><p>C’est lie du a l’entrelacement et alterner les images</p></blockquote><p>Aujourd’hui on n’a que des ecrans plats avec des pixels avec une bonne reactivite (jusqu’a 140 Hz)</p><div class="alert alert-danger" role="alert"><p>Mais ca nous pose des ENORMES problemes avec l’entrelacement</p></div><p>Sur nos ecrans actuels, chaque pixel a chacun sa vie.</p><p>On a un probleme de taille d’ecran, de pixels, de resolution, etc.</p><p><em>Pourquoi garder l’entrelacement ?</em></p><blockquote><p>Car il y a encore des pays qui utilisent des teles cathodiques</p></blockquote><div class="alert alert-success" role="alert"><p>Si c’est moins cher, on va le faire</p></div><blockquote><p>On paye cher apres car c’est a credit</p></blockquote><h2 id="un-peu-dhistoire">Un peu d’histoire<a href="#un-peu-dhistoire"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>1941: standard NTSC <img data-proofer-ignore data-src="https://i.imgur.com/El1RSCa.png" alt="" /><ul><li>6 MHz de bande passante<li>Dot crawl: information couleur mal filtree<li>15730 ligne/s<li>525 ligne/image<li>15730 / 525 = 30 ips<ul><li>OK pour films (24 ips)<li>NOK pour du direct</ul></ul></ul><h2 id="une-idee-simple">Une idee simple<a href="#une-idee-simple"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>1 frame: 2 fields : pair/impair<li>Captures a des instants differents</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/u2Jabvn.png" alt="" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/fsXQ0IW.png" alt="" /></p><p>TFF = Top filter (flag)</p><p><img data-proofer-ignore data-src="https://i.imgur.com/HTYg7zz.png" alt="" /></p><p>BFF = Bottom filter (flag)</p><h3 id="exemples">Exemples<a href="#exemples"><i class="fas fa-hashtag"></i></a></h3></h3><p><img data-proofer-ignore data-src="https://i.imgur.com/slzC3zi.png" alt="" /></p><p>Une image entrelacee c’est une image avec des <em>dents</em></p><div class="alert alert-warning" role="alert"><p>Tous les flux de la TNT sont entrelaces et ne sont <strong>pas en HD</strong></p><p>On en en 1440i50</p></div><div class="alert alert-danger" role="alert"><p>Le numerique, c’est pas que c’est mieux, c’est que c’est moins cher</p></div><h2 id="entrelacement">Entrelacement<a href="#entrelacement"><i class="fas fa-hashtag"></i></a></h2></h2><p>Avantages:</p><ul><li>Image fixe: resolution conservee<li>Image mouvante: $2\times$ plus fluide<li>BW inchangee<li>Parfait pour un tube cathodique</ul><p>Inconvenients:</p><ul><li>Resolution horizontales / 2 si mouvement<li>Signaliser l’ordre des fields<li>Scintillement<li>Le futur devra faire avec…</ul><p><img data-proofer-ignore data-src="https://i.imgur.com/R3wpcfh.gif" alt="" /></p><h2 id="exemple">Exemple<a href="#exemple"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-proofer-ignore data-src="https://i.imgur.com/9eGx8c8.png" alt="" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/9Gocbz7.png" alt="" /></p><p><img data-proofer-ignore data-src="https://i.imgur.com/VTIuImv.png" alt="" /></p><div class="alert alert-warning" role="alert"><p>En bas a droite l’objet bouge mais n’est pas entrelace</p></div><blockquote><p>Ce flux video donne des maux de tete aux ingenieurs Le OK ne bouge pas et ne doit pas etre entrelace Le logo en bas a droite est le logo corporate</p></blockquote><div class="alert alert-success" role="alert"><p>Il y a plusieurs entrelaceurs</p></div><p>Exemple: VLC</p><p><img data-proofer-ignore data-src="https://i.imgur.com/F8RB4yo.png" alt="" /></p><p><em>Ou est le K ?</em></p><blockquote><p>On a pris que les lignes du haut et on a degage les lignes du bas C’est desentrelace comme un pied par le GPU</p></blockquote><p>Plusieurs facons de desentrelace:</p><ul><li>Prendre que les lignes du dessus et upscale $\times 2$ en vertical</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/cours/categories/image-s9/'>Image S9</a>, <a href='/cours/categories/tvid/'>TVID</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/cours/tags/image/" class="post-tag no-text-decoration" >Image</a> <a href="/cours/tags/s9/" class="post-tag no-text-decoration" >S9</a> <a href="/cours/tags/tvid/" class="post-tag no-text-decoration" >TVID</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=TVID: Du pixel a l'ecran - Cours&url=https://lemasyma.github.io/cours/posts/tvid_pixel_a_image/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=TVID: Du pixel a l'ecran - Cours&u=https://lemasyma.github.io/cours/posts/tvid_pixel_a_image/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=TVID: Du pixel a l'ecran - Cours&url=https://lemasyma.github.io/cours/posts/tvid_pixel_a_image/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/cours/posts/ocvx_norme/">OCVX: Norme</a><li><a href="/cours/posts/imed2_tp3/">IMED2: TP3</a><li><a href="/cours/posts/prsta_revisions_1/">PRSTA: Revisions 1</a><li><a href="/cours/posts/prsta_td5/">PRSTA: TD 5</a><li><a href="/cours/posts/prsta_td4/">PRSTA: TD 4</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/cours/tags/image/">Image</a> <a class="post-tag" href="/cours/tags/s8/">S8</a> <a class="post-tag" href="/cours/tags/s9/">S9</a> <a class="post-tag" href="/cours/tags/tronc-commun/">tronc commun</a> <a class="post-tag" href="/cours/tags/scia/">SCIA</a> <a class="post-tag" href="/cours/tags/s6/">S6</a> <a class="post-tag" href="/cours/tags/shannon/">Shannon</a> <a class="post-tag" href="/cours/tags/cama/">CAMA</a> <a class="post-tag" href="/cours/tags/loi/">loi</a> <a class="post-tag" href="/cours/tags/rvau/">RVAU</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/cours/posts/tvid_motion_estimation/"><div class="card-body"> <em class="timeago small" date="2021-10-25 10:00:00 +0200" >Oct 25, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>TVID: 2D Motion Estimation</h3><div class="text-muted small"><p> Lien de la note Hackmd Scalable video recording Scalability referes to the capacity of recovering physically meaningful image or video information from deconding only partial compressed bitstr...</p></div></div></a></div><div class="card"> <a href="/cours/posts/tvid_audi_numerique/"><div class="card-body"> <em class="timeago small" date="2021-12-06 10:00:00 +0100" >Dec 6, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>TVID: L'audio numerique en pratique</h3><div class="text-muted small"><p> Lien de la note Hackmd Onde sonore Le briques de base de la compression du son sont un peu differentes de celle de la video. Perception du son Qu’est-ce que c’est le son ? Onde sonore Varia...</p></div></div></a></div><div class="card"> <a href="/cours/posts/tvid_video_numerique_pratique/"><div class="card-body"> <em class="timeago small" date="2021-11-10 14:00:00 +0100" >Nov 10, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>TVID: La video numerique en pratique</h3><div class="text-muted small"><p> Lien de la note Hackmd Film et entrelacement Film = 24P, NTSC = 60I Comment passer un film a la tele ? 2:3 pulldown 4 frames, 10 fields A: TFF + RFF B: BFF ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/cours/posts/vpoa_detection_localisation/" class="btn btn-outline-primary" prompt="Older"><p>VPOA: Detection et localisation</p></a> <a href="/cours/posts/dlim_res_neurones_convolutif/" class="btn btn-outline-primary" prompt="Newer"><p>DLIM: Reseaux neuronaux convolutifs</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/lemasyma">lemasyma</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/cours/tags/image/">Image</a> <a class="post-tag" href="/cours/tags/s8/">S8</a> <a class="post-tag" href="/cours/tags/s9/">S9</a> <a class="post-tag" href="/cours/tags/tronc-commun/">tronc commun</a> <a class="post-tag" href="/cours/tags/scia/">SCIA</a> <a class="post-tag" href="/cours/tags/s6/">S6</a> <a class="post-tag" href="/cours/tags/shannon/">Shannon</a> <a class="post-tag" href="/cours/tags/cama/">CAMA</a> <a class="post-tag" href="/cours/tags/loi/">loi</a> <a class="post-tag" href="/cours/tags/rvau/">RVAU</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/cours/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/cours/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/cours/assets/js/dist/post.min.js"></script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "AMS" }, tagSide: "right" }, tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], displayMath: [ ['$$','$$'], ["\\[","\\]"] ], processEscapes: true }, CommonHTML: { linebreaks: { automatic: true } }, "HTML-CSS": { linebreaks: { automatic: true } }, SVG: { linebreaks: { automatic: true } } }); MathJax.Hub.Register.StartupHook("TeX AMSmath Ready", function () { MathJax.InputJax.TeX.Stack.Item.AMSarray.Augment({ clearTag() { if (!this.global.notags) { this.super(arguments).clearTag.call(this); } } }); }); </script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> <script type="text/javascript" charset="utf-8" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS_CHTML"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/cours/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-PVWXSNG5J8"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-PVWXSNG5J8'); }); </script>
